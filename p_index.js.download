"use strict";(self.webpackChunk_ice_lite_scaffold=self.webpackChunk_ice_lite_scaffold||[]).push([[767],{179:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var o,i,r=t(10),s=t(188),a=t(912),c=t(582),d=t(220),l=t(893),u=t(294),m=t(935),p={babelStandalone:["https://g.alicdn.com/code/lib/babel-standalone/7.25.8/babel.min.js"],antd:["https://g.alicdn.com/code/lib/dayjs/1.11.13/dayjs.min.js","https://g.alicdn.com/code/lib/antd/5.21.4/antd.min.js"],"@ant-design/icons":["https://g.alicdn.com/code/lib/ant-design-icons/5.5.1/index.umd.min.js"]},f={"qwenlm.io":"prod","pre-qwenlm-box.alibaba-inc.com":"pre","dev.aliyun.com":"dev"}[window.location.host]||"dev",w=function(){(0,u.useEffect)(function(){var e=new window.AES("prod"===f?{pid:"qwen-webui-artifacts",uid:"",username:""}:{pid:"pre-qwenlm-artifacts",uid:"",username:""}),n=window.AESPluginPV,t=window.AESPluginEvent,o=window.AESPluginJSError,i=window.AESPluginAPI,r=window.AESPluginResourceError,s=window.AESPluginPerf,a=window.AESPluginEventTiming;e.use([n,t,o,i,r,s,a])},[])};function g(e){var n=e.errStr;return(0,d.BX)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#F9F9F9"},children:[(0,d.tZ)("img",{style:{width:"56px",height:"56px"},src:"https://img.alicdn.com/imgextra/i4/O1CN013Bajs91da0fT1zQzb_!!6000000003751-55-tps-56-56.svg"}),(0,d.tZ)("p",{style:{height:"22px",width:"56px",fontWeight:500,fontSize:"14px",color:"#615CED",textAlign:"center",lineHeight:"22px"},children:"\u9884\u89C8\u5931\u8D25"}),(0,d.tZ)("p",{style:{fontSize:"12px",color:"rgba(0,0,0,0.60)",textAlign:"center",lineHeight:"20px",marginTop:0},children:n})]})}var h=t(52);window.React=u,window.ReactDOM=m;var v=[],b="",y=(o=(0,r._)(function(e){return(0,c.Jh)(this,function(n){return[2,new Promise(function(n){var t=document.createElement("script");t.src=e,t.nonce=b,document.body.appendChild(t),t.onload=function(){n("")}})]})}),function(e){return o.apply(this,arguments)}),E=(i=(0,r._)(function(){var e;return(0,c.Jh)(this,function(n){return v=(0,a._)(new Set(v)),e=[],v.forEach(function(n){var t=p[n]||[];e.push.apply(e,(0,a._)(t))}),[2,Promise.all(e.map(function(e){return y(e)}))]})}),function(){return i.apply(this,arguments)}),x=function(e){var n=(0,h.Fr)(e);return window[n]||window[(0,h.fm)(n)]||{}};function S(){var e=(0,s._)((0,u.useState)(""),2),n=e[0],t=e[1],o=(0,s._)((0,u.useState)(""),2),i=o[0],a=o[1],f=(0,s._)((0,u.useState)(!1),2),y=f[0],S=f[1],_=(0,s._)((0,u.useState)(""),2),j=_[0],A=_[1];w();var P=(0,u.useCallback)(function(){console.log("postOnloadMessage"),setTimeout(function(){window.parent.postMessage({type:"codeOnload"},"*")},0)},[]);return((0,u.useEffect)(function(){var e,n=(e=(0,r._)(function(e){var n;return(0,c.Jh)(this,function(t){return"screenshot"===(n=e.data).type&&(console.log("screen shot"),setTimeout((0,r._)(function(){var e;return(0,c.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,h.fe)()];case 1:return e=t.sent().toDataURL("image/jpeg",.5),window.parent.postMessage({type:"screenshot",dataUrl:e,postData:n},"*"),[2]}})}),500)),[2]})}),function(n){return e.apply(this,arguments)});return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}},[]),(0,u.useEffect)(function(){var e=function(e){var n=e.data;if(b=n.nonceUid,["react","jsx"].includes(n.type)){t(n.code),a(n.type);var o=document.createElement("script");o.src=p.babelStandalone[0],o.nonce=n.nonceUid,o.onload=(0,r._)(function(){var e,t,o,i,r,s;return(0,c.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e=window.Babel.transform(n.code,{presets:["env","react"],plugins:["transform-modules-commonjs",{visitor:{ImportDeclaration(e){var n=e.node.source.value;v.push(n)}}}]}),console.log("dependencies: ",v),[4,E()];case 1:return a.sent(),console.log(e.code),o={exports:t={}},(0,h.MJ)(e.code,{exports:t,module:o,require:x}),i=t.default,m.render((0,u.createElement)(i,{}),document.getElementById("root")),P(),[3,3];case 2:throw r=a.sent(),(0,h.qJ)((null===(s=r)||void 0===s?void 0:s.message)||r),Error(r);case 3:return[2]}})}),document.body.appendChild(o)}else["html","svg+xml","svg","mermaid"].includes(n.type)?(t(n.code),a(n.type),P()):"error"===n.type&&(S(!0),A(n.error))};return window.addEventListener("message",e),window.parent.postMessage({type:"codeIframeReady"},"*"),function(){S(!1),A(""),window.removeEventListener("message",e)}},[P]),(0,u.useEffect)(function(){(0,h.Ab)({code:n,type:i,nonceUid:b})},[n,i]),y)?(0,d.tZ)(g,{errStr:j}):(0,d.BX)(l.Fragment,{children:[["react","jsx"].includes(i)&&(0,d.tZ)("div",{id:"root",className:"root"}),["html","svg+xml","svg"].includes(i)&&(0,d.tZ)("iframe",{className:"root",id:"htmlIframe",sandbox:"allow-same-origin allow-scripts",nonce:b,srcDoc:(0,h.Tu)(n,b)}),"mermaid"===i&&(0,d.tZ)("iframe",{id:"mermaidIframe",className:"root",nonce:b,srcDoc:(0,h.z$)(n,b)})]})}}}]);